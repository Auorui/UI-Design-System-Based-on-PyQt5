# BatchVision 批处理系统使用手册

- 作者： Junrui Zeng(Auorui)
- 微信： zjricetea(备注'BatchVision支持')
- 分享： [网盘分享](https://pan.baidu.com/s/1Kk2ZFWa9eXlrvdHf0I7hQQ?pwd=cb1j)

## 🌟 系统概述
一款基于PyQt5开发的桌面端批处理工具，集成三大核心功能：
- **图像尺寸批量修改**（保持比例/强制缩放）
- **智能数据集划分**（训练集/验证集/测试集）
- **高级重命名系统**（带序号生成/格式转换）
- **扩展功能**：灰度化处理、图像统计（均值/标准差）

---

## 🚀 快速入门

### 环境配置
```bash
# 必需依赖
pip install pyqt5 pillow numpy natsort
```

### 说明
这是一个集成了划分训练集和验证集、批处理文件夹图像重命名、批修改图像大小的UI系统，是集合了我以前写过的函数[pyzjr.data.scripts](https://github.com/Auorui/pyzjr/tree/main/data/scripts)
，后续会考虑在1.4.15之后删除。因为我将这些功能集合到了此ui当中。

### 功能讲解

在运行前必须选择需要处理的图像文件夹，以及保存的路径，最好是非空的文件夹，如果不是我们会默认生成一个带有时间戳的子目录，
并且如果对下面的参数没有写入，也会通过弹窗提醒。
#### 修改图像大小

**参数要求：**
- 高度(H)：正整数
- 宽度(W)：正整数


#### 划分训练集与验证集
**比例规则：**
- 训练集  0.0 < x < 1.0   

- 验证集  0.0 < y < 1.0  

- 测试集  1 - (x + y)   （自动计算）

**文件输出：**
- `train.txt`: 训练集路径列表
- `val.txt`: 验证集路径列表 
- `test.txt`: 测试集路径列表（当test_ratio>0时生成, 否则就是一个空文件）

**特殊模式：**
- ✔️ 勾选"only image name"时，文本文件只记录名称不含路径

#### 批量重命名
写入任意参数即可有用

**命名规则：**
[前缀][起始数（补零序号）][后缀].[指定格式]

示例：sample_0045_augmented.jpg

**参数说明：**

- 前缀：禁止含`/\:*?"<>|` 
- 后缀：禁止含`.`
- 起始数：≥0整数
- 数字长度：1-10
- 输出格式：jpg/png/bmp/jpeg （没填就是原格式)



#### 图像特殊功能

**计算均值/标准差**
- **计算方式**：
  - 按通道计算RGB均值
  - 基于全体图像的标准差
- **输出格式**：

最终的均值为: [0.485, 0.456, 0.406],
标准值为: [0.229, 0.224, 0.225]

**图像灰度化**
- **转换模式**：'RGB' → 'L'



## ❗ 注意事项

1. **特别提醒**
   - 使用前最好先进行数据备份！！！
   
2. **路径安全**
   - 避免使用中文路径（可能引发编码问题）
   - 网络路径需确保稳定的连接

3. **大文件处理**
   - 4K以上图像建议分批处理
   - 启用"均值计算"时会显著增加内存占用


## 其他
本系统用到的函数来自与 [pyzjr.data.scripts](https://github.com/Auorui/pyzjr/tree/main/data/scripts), 因为集成了ui系统，
后续会考虑删除。

本系统源码请看[GitHub项目主页](https://github.com/Auorui/UI-Design-System-Based-on-PyQt5/blob/main/BatchVision.py)
